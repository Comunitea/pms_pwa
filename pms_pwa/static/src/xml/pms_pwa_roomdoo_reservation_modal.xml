<?xml version="1.0" encoding="utf-8" ?>
<templates id="pms_pwa" xml:space="preserve">
    <t t-name="pms_pwa.roomdoo_reservation_modal">
        <!-- Modal -->
        <t t-if="reservation">
            <div class="modal o_pms_pwa_right fade o_pmw_pwa_reservation_modal" tabindex="-1" role="dialog" aria-labelledby="o_pmw_pwa_reservation_modal">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">

                        <div class="modal-header o_pms_pwa_modal_header">
                            <div class="container-fluid">
                                <div class="row">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="fa fa-times"/></button>
                                </div>
                                <div class="row o_pms_pwa_modal_header_pad">
                                    <h4 class="col-8 modal-title"><t t-esc="texts.reservation_text || _t('Reservation')"/> <span t-esc="reservation.id"/></h4>
                                    <a href="/reservation-detail/1" class="col-4 btn btn-outline-dark float-right" data-id="254">
                                        <t t-esc="texts.info_text || _t('More info')"/>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="modal-body o_pms_pwa_modal_body">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-3 align-self-center"><img t-att-src="reservation.image" class="img-thumbnail"/></div>
                                    <div class="col-9 align-self-center">
                                        <div class="row">
                                            <div class="col-12 align-self-center">
                                                <strong>
                                                    <span class="o_pms_pwa_reservation_name" t-esc="reservation.name"/>
                                                </strong>
                                            </div>
                                            <div class="col-12 align-self-center">
                                                <a t-att-href="'tel:' + reservation.phone_number"><span t-esc="reservation.phone_number"/></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div t-if="reservation.unread_msg and reservation.unread_msg &gt; 0 and reservation.messages" class="row">
                                    <div class="col-12">
                                        <select class="custom-select custom-select-sm o_pms_pwa_messages"
                                            name="messages">
                                            <option name="messages" selected='selected'>
                                                <span t-esc="reservation.unread_msg"/> <t t-esc="texts.unread_text || _t('unread message(s)')"/>
                                            </option>
                                            <option name="messages" t-foreach="reservation.messages"
                                                t-as="key" t-att-value="key">
                                                <t t-esc="key"/>
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <!-- Form action needs to be updated with the real action -->
                                <form target="_self" action="/my/reservations/update" method="post">
                                    <sheet>
                                        <div class="form-group form-field mt8">
                                            <label class="control-label col-12" for="room_type"><t t-esc="texts.room_type_text || _t('Room type')"/></label>
                                            <select class="form-control o_website_form_input o_domain_leaf_operator_select o_input"  name="room_type">
                                                <option name="room_type" t-foreach="room_types"
                                                    t-as="key" t-att-value="key"
                                                    t-att-selected="reservation.room_type === key ? 'selected' : None">
                                                    <t t-esc="key"/>
                                                </option>
                                            </select>
                                        </div>
                                        <div class="form-group form-field">
                                            <div class="row">
                                                <div class="col-6">
                                                    <label class="control-label col-12" for="room_number">
                                                        <t t-esc="texts.room_number_text || _t('Room nº')"/>
                                                    </label>
                                                    <select class="form-control o_website_form_input o_domain_leaf_operator_select o_input"  name="room_number">
                                                        <option name="room_number" t-foreach="room_numbers"
                                                            t-as="key" t-att-value="key"
                                                            t-att-selected="reservation.room_number === key ? 'selected' : None">
                                                            <t t-esc="key"/>
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="col-6">
                                                    <label class="control-label col-12" for="nights_number">
                                                        <t t-esc="texts.nights_number_text || _t('Nights nº')"/>
                                                    </label>
                                                    <input class="form-control"
                                                        type="text" name="nights_number"
                                                        t-att-value="reservation.nights_number" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-field">
                                            <div class="row">
                                                <div class="col-6">
                                                    <label class="control-label col-12" for="check_in_date">
                                                        <t t-esc="texts.check_in_text || _t('Check in')"/>
                                                    </label>
                                                    <input class="form-control"
                                                        type="date" name="check_in_date" t-att-value="reservation.check_in_date" />
                                                </div>
                                                <div class="col-6">
                                                    <label class="control-label col-12" for="check_in_hour">
                                                        <t t-esc="texts.check_in_time_text || _t('Check in time')"/>
                                                    </label>
                                                    <input class="form-control"
                                                        type="time" name="check_in_hour" t-att-value="reservation.check_in_hour" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-field">
                                            <div class="row">
                                                <div class="col-6">
                                                    <label class="control-label col-12" for="check_out_date">
                                                        <t t-esc="texts.check_out_text || _t('Check out')"/>
                                                    </label>
                                                    <input class="form-control"
                                                        type="date" name="check_out_date" t-att-value="reservation.check_out_date" />
                                                </div>
                                                <div class="col-6">
                                                    <label class="control-label col-12" for="check_out_hour">
                                                        <t t-esc="texts.check_out_time_text || _t('Check out time')"/>
                                                    </label>
                                                    <input class="form-control"
                                                        type="time" name="check_out_hour" t-att-value="reservation.check_out_hour" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-field">
                                            <div class="row">
                                                <div class="col-12">
                                                    <label class="control-label col-12" for="room_price">
                                                        <t t-esc="texts.room_price_text || _t('Room price')"/>
                                                    </label>
                                                    <input class="form-control"
                                                        type="text" name="room_price" t-att-value="reservation.room_price" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-field">
                                            <div class="row">
                                                <div class="col-6">
                                                    <button
                                                        t-att-disabled="!reservation.need_check_in or None"
                                                        class="btn btn-outline-dark btn-block">
                                                        <t t-esc="texts.check_in_text || _t('Check in')"/>
                                                    </button>
                                                </div>
                                                <div class="col-6">
                                                    <button
                                                        t-att-disabled="!reservation.need_check_out or None"
                                                        class="btn btn-outline-dark btn-block">
                                                        <t t-esc="texts.check_out_text || _t('Check out')"/>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-field">
                                            <div class="row">
                                                <div class="col-12">
                                                    <label class="control-label col-12" for="sales_channel">
                                                        <t t-esc="texts.sales_channel_text || _t('Sales channel')"/>
                                                    </label>
                                                    <input class="form-control"
                                                        type="text" name="sales_channel" t-att-value="reservation.sales_channel" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-field">
                                            <h4><t t-esc="texts.extras_text || _t('Extras')"/></h4>
                                            <t t-foreach="extras" t-as="key">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <input type="checkbox"
                                                            t-att-checked="reservation.extra.includes(key) ? 'checked' : undefined"
                                                            t-att-value="key"
                                                            t-att-id="key"/>
                                                        <label class="control-label o_pms_pwa_checkbox_label" t-att-for="key">
                                                            <span t-esc="key"/>
                                                        </label>
                                                    </div>
                                                </div>
                                            </t>
                                        </div>

                                        <div class="form-group form-field">
                                            <div class="row">
                                                <div class="col-12">
                                                    <label class="control-label col-12" for="card_number">
                                                        <t t-esc="texts.card_text || _t('Reservation card number')"/>
                                                    </label>
                                                    <input class="form-control"
                                                        type="text" name="card_number" t-att-value="reservation.card_number" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-field">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <div class="row">
                                                                <strong class="col-12"><t t-esc="texts.total_text || _t('Total')"/></strong>
                                                                <span class="col-12">
                                                                    <strong t-esc="reservation.total"/>€
                                                                    (<span t-esc="reservation.total_vat"/>€ vat)
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col-6">
                                                            <div class="row">
                                                                <strong class="col-12"><t t-esc="texts.outstading_text || _t('Outstanding')"/></strong>
                                                                <span class="col-12">
                                                                    <strong t-esc="reservation.outstanding"/>€
                                                                    (<span t-esc="reservation.outstanding_vat"/>€ vat)
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-field"
                                            t-if="reservation.outstanding and reservation.outstanding &gt; 0 and payment_methods">
                                            <div class="row">
                                                <div class="col-12">
                                                    <t t-foreach="payment_methods" t-as="key">
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <input type="radio" t-att-value="key" name="payment_methods" t-att-id="key"/>
                                                                <label class="control-label o_pms_pwa_checkbox_label" t-att-for="key">
                                                                    <span t-esc="key"/>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </t>
                                                </div>
                                                <div class="col-6 mt4">
                                                    <button class="btn btn-outline-dark btn-block"
                                                        special="cancel">
                                                        <t t-esc="texts.pay_text || _t('Pay')"/>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-field">
                                            <div class="row">
                                                <div class="col-12">
                                                    <label class="control-label col-12" for="notes">
                                                        <t t-esc="texts.notes_text || _t('Notes')"/>
                                                    </label>
                                                    <textarea class="form-control o_website_form_input" name="notes">
                                                        <t t-esc="reservation.notes"/>
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group mt32">
                                            <div class="row">
                                                <div class="col-6">
                                                    <button class="btn btn-outline-dark btn-block o_website_form_send"
                                                        confirm="Current reservation will be cancelled, are you sure about that?"
                                                        special="cancel">
                                                        <t t-esc="_t('Cancel')"/>
                                                    </button>
                                                </div>
                                                <div class="col-6">
                                                    <button type="submit"
                                                        class="btn btn-dark btn-block o_website_form_send">
                                                        <t t-esc="_t('Save')"/>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </sheet>
                                </form>
                            </div>
                        </div>

                    </div><!-- modal-content -->
                </div><!-- modal-dialog -->
            </div><!-- modal -->
        </t>
    </t>

</templates>
